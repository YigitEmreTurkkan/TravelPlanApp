<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Plan App</title>
    <style>
        #map {
            width: 100%;
            height: 600px;
            border: 1px solid #ccc;
            position: relative; /* Make the map position relative */
        }
        .visited {
            fill: green !important;
        }
        .to-visit {
            fill: orange !important;
        }
        #countryLabel {
            position: absolute; /* Position the label absolutely */
            top: 20px; /* Position it at the top */
            left: 50%; /* Center it horizontally */
            transform: translateX(-50%); /* Adjust position */
            font-size: 1.5em; /* Font size */
            color: black; /* Text color */
            background: rgba(255, 255, 255, 0.7); /* Background for readability */
            padding: 5px; /* Padding */
            border-radius: 5px; /* Rounded corners */
            display: none; /* Hidden by default */
            z-index: 10; /* Ensure it appears above the map */
        }
    </style>
</head>
<body>
<h1>Gezgin Uygulaması - Dünya Haritası</h1>
<div id="map">
    <object id="svgMap" data="/static/MapChart_Map.svg" type="image/svg+xml" width="100%" height="600px"></object>
    <div id="countryLabel"></div> <!-- Country label overlay -->
</div>

<script>
    const mapData = {
        "groups": {
            "#d73027": {
                "label": "",
                "paths": ["Brazil", "Bolivia", "Argentina"]
            }
        },
        "hidden": [
            "Yukon_CA", "Prince_Edward_Island_CA", "New_Brunswick_CA", "Ontario_CA",
            "British_Columbia_CA", "Alberta_CA", "Saskatchewan_CA", "Manitoba_CA",
            "Quebec_CA", "Nunavut_CA", "Newfoundland_and_Labrador_CA",
            "Northwest_Territories_CA", "Nova_Scotia_CA", "USA_Alaska", "USA_Wisconsin",
            "England", "Northern_Ireland"
        ],
        "defaultColor": "#d1dbdd",
        "highlightColor": "#d73027"
    };

    document.addEventListener("DOMContentLoaded", function() {
        const svgObject = document.getElementById("svgMap");
        const countryLabel = document.getElementById("countryLabel");

        svgObject.addEventListener("load", function() {
            const svgDoc = svgObject.contentDocument;
            const countries = svgDoc.querySelectorAll("path");

            mapData.groups["#d73027"].paths.forEach(countryId => {
                const country = svgDoc.getElementById(countryId);
                if (country) {
                    country.style.fill = mapData.highlightColor;
                }
            });

            mapData.hidden.forEach(hiddenId => {
                const hiddenRegion = svgDoc.getElementById(hiddenId);
                if (hiddenRegion) {
                    hiddenRegion.style.display = "none";
                }
            });

            countries.forEach(country => {
                country.style.fill = mapData.defaultColor;

                country.addEventListener("click", function() {
                    const countryName = country.getAttribute('id'); // Get the ID of the clicked country
                    if (country.classList.contains("visited")) {
                        country.classList.remove("visited");
                        country.style.fill = mapData.defaultColor; // Reset color
                        countryLabel.style.display = "none"; // Hide label
                    } else if (country.classList.contains("to-visit")) {
                        country.classList.remove("to-visit");
                        country.classList.add("visited");
                        country.style.fill = "green"; // Change color to visited
                        countryLabel.innerText = `Ziyaret Edildi: ${countryName}`; // Show visited country
                        countryLabel.style.display = "block"; // Show label
                    } else {
                        country.classList.add("to-visit");
                        country.style.fill = "orange"; // Change color to to-visit
                        countryLabel.innerText = `Gidilmesi Planlanan: ${countryName}`; // Show to-visit country
                        countryLabel.style.display = "block"; // Show label
                    }
                });
            });
        });
    });
</script>
</body>
</html>
